generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "rhel-openssl-1.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Range {
  id            String        @id @default(uuid())
  name          String
  slug          String        @unique
  area          String
  town          String?
  address       String?
  postcode      String?
  latitude      Float?
  longitude     Float?
  status        String        @default("QUIET")
  note          String?
  lastUpdatedAt DateTime?
  openingHours  Json?
  isActive      Boolean       @default(true)
  createdAt     DateTime      @default(now())
  statusEvents  StatusEvent[]
  users         User[]

  @@map("ranges")
}

model User {
  id           String   @id @default(uuid())
  email        String   @unique
  passwordHash String
  role         String   @default("RANGE")
  rangeId      String?
  createdAt    DateTime @default(now())
  range        Range?   @relation(fields: [rangeId], references: [id], onDelete: Cascade)

  @@map("users")
}

model StatusEvent {
  id        String   @id @default(uuid())
  rangeId   String
  status    String
  createdAt DateTime @default(now())
  range     Range    @relation(fields: [rangeId], references: [id], onDelete: Cascade)

  @@map("status_events")
}
